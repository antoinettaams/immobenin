generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Utilisateur {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  nom       String
  telephone String
  createdAt DateTime @default(now())
  biens     Bien[]

  @@map("utilisateurs")
}

model Bien {
  id                   Int              @id @default(autoincrement())
  images               String[]
  category             Category
  subType              String
  privacy              Privacy?
  country              String           @default("BÃ©nin")
  city                 String
  neighborhood         String?
  address              String
  postalCode           String?
  latitude             Float?
  longitude            Float?
  size                 Int?
  floors               Int?
  maxGuests            Int?
  bedrooms             Int?
  beds                 Int?
  bathrooms            Int?
  privateEntrance      Boolean?         @default(false)
  employees            Int?
  offices              Int?
  meetingRooms         Int?
  workstations         Int?
  eventCapacity        Int?
  parkingSpots         Int?
  wheelchairAccessible Boolean?         @default(false)
  hasStage             Boolean?         @default(false)
  hasSoundSystem       Boolean?         @default(false)
  hasProjector         Boolean?         @default(false)
  minBookingHours      Int?
  title                String?
  basePrice            Float?
  currency             String           @default("FCFA")
  weeklyDiscount       Float?           @default(0)
  monthlyDiscount      Float?           @default(0)
  cleaningFee          Float?           @default(0)
  extraGuestFee        Float?           @default(0)
  securityDeposit      Float?           @default(0)
  checkInTime          String?
  checkOutTime         String?
  childrenAllowed      Boolean?         @default(true)
  isPublished          Boolean          @default(false)
  proprietaireId       Int
  createdAt            DateTime         @default(now())
  updatedAt            DateTime         @updatedAt
  proprietaire         Utilisateur      @relation(fields: [proprietaireId], references: [id])
  description          Description?
  equipements          EquipementBien[]

  @@map("biens")
}

model Description {
  id               Int      @id @default(autoincrement())
  summary          String
  spaceDescription String
  guestAccess      String
  neighborhoodInfo String
  bienId           Int      @unique
  createdAt        DateTime @default(now())
  bien             Bien     @relation(fields: [bienId], references: [id])

  @@map("descriptions")
}

model Equipement {
  id            Int              @id @default(autoincrement())
  code          String           @unique
  nom           String
  description   String?
  categorie     String
  pourMaison    Boolean          @default(false)
  pourBureau    Boolean          @default(false)
  pourEvenement Boolean          @default(false)
  biens         EquipementBien[]

  @@map("equipements")
}

model EquipementBien {
  id           Int        @id @default(autoincrement())
  bienId       Int
  equipementId Int
  bien         Bien       @relation(fields: [bienId], references: [id])
  equipement   Equipement @relation(fields: [equipementId], references: [id])

  @@unique([bienId, equipementId])
  @@map("equipement_biens")
}

enum Category {
  HOUSE
  OFFICE
  EVENT
}

enum Privacy {
  ENTIRE
  PRIVATE
  SHARED
}
